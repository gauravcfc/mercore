<div class="login-container">
    <mat-card class="login-card p-sm-5 ">
        <mat-card-header>
            <div class="mx-auto p-4">
                <mat-card-title>
                    <img mat-card-image src="assets/images/mercore-logo.svg" alt="mercore-logo" />
                </mat-card-title>
            </div>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="authForm" (ngSubmit)="onSubmit()">
                <div class="input-field">
                    <mat-form-field
                        appearance="outline"
                        class="w-100 mb-3"
                        *ngIf="authType == guestAuthType.signup"
                    >
                        <mat-label>First Name</mat-label>
                        <input
                            matInput
                            type="text"
                            formControlName="firstName"
                            placeholder="First Name"
                        />
                        <mat-error *ngIf="errorHandling('firstName', 'required')">
                            First Name is required
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field
                        appearance="outline"
                        class="w-100 mb-3"
                        *ngIf="authType == guestAuthType.signup"
                    >
                        <mat-label>Last Name</mat-label>
                        <input
                            matInput
                            type="text"
                            formControlName="lastName"
                            placeholder="Last Name"
                        />
                        <mat-error *ngIf="errorHandling('lastName', 'required')">
                            Last Name is required
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field
                        appearance="outline"
                        class="w-100 mb-3"
                        *ngIf="authType == guestAuthType.signup"
                    >
                        <mat-label>Company Name</mat-label>
                        <input
                            matInput
                            type="text"
                            formControlName="company"
                            placeholder="Company Name"
                        />
                        <mat-error *ngIf="errorHandling('company', 'required')">
                            Company name is required
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="w-100 mb-3">
                        <mat-label>Email</mat-label>
                        <img
                            src="assets/images/email.svg"
                            alt="email"
                            matSuffix
                            class="input-icon"
                        />
                        <input
                            matInput
                            type="text"
                            formControlName="email"
                            placeholder="Email"
                            [readonly]="authType == guestAuthType.signup"
                        />
                        <mat-error
                            *ngIf="controls['email'].touched && errorHandling('email', 'required')"
                        >
                            Email is required
                        </mat-error>
                        <mat-error
                            *ngIf="controls['email'].touched && errorHandling('email', 'pattern')"
                        >
                            Email is invalid
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="w-100 mb-3">
                        <mat-label>Password</mat-label>
                        <input
                            matInput
                            type="password"
                            formControlName="password"
                            placeholder="Password"
                            [type]="hide ? 'password' : 'text'"
                        />
                        <button
                            type="button"
                            mat-icon-button
                            matSuffix
                            (click)="hide = !hide"
                            [attr.aria-label]="'Hide password'"
                            [attr.aria-pressed]="hide"
                        >
                            <mat-icon>{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
                        </button>
                        <mat-error
                            *ngIf="
                                controls['password'].touched &&
                                errorHandling('password', 'required')
                            "
                        >
                            Password is required
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="mt-3">
                    <button
                        mat-flat-button
                        color="primary"
                        class="w-100"
                        type="submit"
                        [disabled]="authForm.invalid"
                    >
                        {{ btnText }}
                    </button>
                </div>
            </form>
            <div class="bottom-content text-center">
                <p *ngIf="authType == guestAuthType.signup">
                    Already have a user profile?<span
                        (click)="setAuthType($event, guestAuthType.login)"
                    >
                        Log in
                    </span>
                </p>
            </div>
        </mat-card-content>
    </mat-card>
</div>
